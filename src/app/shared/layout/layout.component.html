<div class="layout-wrapper" [class.sidebar-collapsed]="!sidebarVisible">
  <!-- Header avec Logo -->
  <header class="layout-header">
    <div class="header-left">
      <button 
        pButton 
        icon="pi pi-bars" 
        class="p-button-text p-button-plain"
        (click)="toggleSidebar()"
        pTooltip="Menu"
        tooltipPosition="right"
      ></button>
      
      <div class="logo-container">
        <img src="assets/logo.png" alt="AGROCEAN" class="app-logo">
        <h2 class="app-title">
          AGROCEAN
          <span class="subtitle">Terre & Mer Durables</span>
        </h2>
      </div>
    </div>

    <div class="header-right">
      <!-- Notifications Alertes de Stock -->
      <button
        *ngIf="canViewAlertes()"
        pButton
        pBadge
        [value]="alertesNonLues > 0 ? alertesNonLues.toString() : ''"
        severity="danger"
        icon="pi pi-bell"
        class="p-button-text p-button-plain"
        pTooltip="Alertes de stock"
        tooltipPosition="left"
        (click)="navigateToAlertes()"
      ></button>

      <!-- Notifications Demandes d'Approvisionnement -->
      <button
        *ngIf="canViewDemandesNotifications()"
        pButton
        pBadge
        [value]="demandesEnAttente > 0 ? demandesEnAttente.toString() : ''"
        severity="info"
        icon="pi pi-inbox"
        class="p-button-text p-button-plain"
        pTooltip="Demandes d'approvisionnement en attente"
        tooltipPosition="left"
        (click)="navigateToDemandesAppro()"
      ></button>

      <div class="user-menu" *ngIf="currentUser">
        <p-avatar 
          [label]="currentUser.prenom.charAt(0) + currentUser.nom.charAt(0)" 
          styleClass="p-mr-2"
          size="large"
        ></p-avatar>
        <div class="user-info">
          <span class="user-name">{{ currentUser.prenom }} {{ currentUser.nom }}</span>
          <span class="user-role">{{ getRoleDisplay() }}</span>
        </div>
        <button
          pButton
          icon="pi pi-user"
          class="p-button-text p-button-plain"
          routerLink="/profile"
          pTooltip="Mon profil"
          tooltipPosition="bottom"
        ></button>
        <button
          pButton
          icon="pi pi-sign-out"
          class="p-button-text p-button-plain p-button-danger"
          (click)="logout()"
          pTooltip="DÃ©connexion"
          tooltipPosition="bottom"
        ></button>
      </div>
    </div>
  </header>

  <!-- Sidebar -->
  <aside class="layout-sidebar" *ngIf="sidebarVisible">
    <p-panelMenu [model]="menuItems" [multiple]="false"></p-panelMenu>
  </aside>

  <!-- Main Content -->
  <main class="layout-main">
    <router-outlet></router-outlet>
  </main>
</div>

<p-toast></p-toast>
<p-confirmDialog></p-confirmDialog>